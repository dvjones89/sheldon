#!/usr/bin/env ruby
require "thor"
require_relative "../lib/sheldon"

class Launcher < Thor


  desc "build PATH_TO_TARGET", "Tell Sheldon to build all config_ files in a directory to single master config"
  def build(rel_path_to_target)
    abs_learn_path = File.expand_path(rel_path_to_target)
    sheldon.build(abs_learn_path)
  end

  desc "learn PATH_TO_TARGET", "Add a new file/folder to Sheldon's brain"
  def learn(rel_path_to_target)
    abs_learn_path = File.expand_path(rel_path_to_target)
    print("Friendly Name For File/Folder: ")
    recall_cue = STDIN.gets.chomp
    sheldon.learn(recall_cue, abs_learn_path)
  end

  desc "recall recall_cue", "Recall a previously learnt file/directory to it's original location on the filesystem"
  def recall(recall_cue)
    sheldon.recall(recall_cue)
  end

  desc "list", "List all cues currently known by Sheldon"
  def list
    puts sheldon.list
  end

  private

  def sheldon
    @sheldon ||= Sheldon.new(File.expand_path("~/sheldon2"))
  end

  map link: :recall

end
Launcher.start(ARGV)
