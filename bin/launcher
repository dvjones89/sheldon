#!/usr/bin/env ruby
require "thor"
require_relative "../lib/sheldon"

class Launcher < Thor

  desc "learn PATH_TO_TARGET", "Add a new file/folder to Sheldon's brain"
  def learn(rel_path_to_target)
    abs_learn_path = File.join(Dir.pwd, rel_path_to_target)
    print("Friendly Name For File/Folder: ")
    recall_cue = STDIN.gets.chomp
    sheldon.learn(recall_cue, abs_learn_path)
  end

  desc "link recall_cue", "Link a previously learnt file/directory to it's original location on the filesystem"
  def link(recall_cue)
    sheldon.recall(recall_cue)
  end

  desc "list", "List all cues currently known by Sheldon"
  def list
    puts sheldon.list
  end

  private

  def sheldon
    @sheldon ||= Sheldon.new(File.expand_path("~/sheldon2"))
  end

end

Launcher.start(ARGV)
